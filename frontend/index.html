<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ft_transcendance Tester</title>
  <link rel="stylesheet" href="src/styles.css" />
  <link href="https://fonts.googleapis.com/css2?family=Mochiy+Pop+P+One&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Mochiy+Pop+P+One&family=Klee+One&display=swap"
    rel="stylesheet" />
</head>

<body>
  <!-- Navigation / Dark Mode -->
  <div class="nav-buttons">
    <button id="toggleDarkMode">üåô Dark Mode</button>
    <button id="toggleRegister">Toggle Register</button>
    <button id="toggleLogin">Toggle Login</button>
    <button id="toggleAllUsers">Show All Users</button>
  </div>

  <!-- Registration Form -->
  <div id="registerForm" class="container hidden">
    <h2>Register</h2>
    <input type="text" id="regUsername" placeholder="Username" />
    <input type="email" id="regEmail" placeholder="Email" />
    <input type="password" id="regPassword" placeholder="Password" />
    <button id="registerBtn">Register</button>
    <p id="registerResponse"></p>
  </div>

  <!-- Login Form -->
  <div id="loginForm" class="container hidden">
    <h2>Login</h2>
    <input type="text" id="loginIdentifier" placeholder="Username or Email" />
    <input type="password" id="loginPassword" placeholder="Password" />
    <button id="loginBtn">Login</button>
    <p id="loginResponse"></p>
  </div>

  <!-- All Users List -->
  <pre id="allUsersResponse" class="container hidden"></pre>

  <!-- User Info & Actions -->
  <div id="userInfo" class="container" style="display: none;">
    <h2>User Info</h2>
    <p>
      ID: <span id="userId"></span><br />
      Username: <span id="userName"></span><br />
      Email: <span id="userEmail"></span><br />
      Status: <span id="userStatus"></span>
    </p>

    <!-- Avatar Section -->
    <div id="avatarSection" class="form-group">
      <h3>Avatar</h3>
      <!-- Display current avatar -->
      <img id="userAvatar" src="/avatars/default.png" alt="User Avatar" width="100" height="100" />
      <!-- File input for uploading a new avatar -->
      <input type="file" id="avatarInput" accept="image/png, image/jpeg, image/webp" />
      <button id="uploadAvatarBtn">Upload Avatar</button>
      <!-- Button to remove avatar and revert to default -->
      <button id="removeAvatarBtn" class="danger-btn">Remove Avatar</button>
    </div>

    <!-- Friend Section -->
    <div id="friendSection" class="container">
      <h3>Friends</h3>
      <!-- Search for a friend by username or email -->
      <div id="friendSearch">
        <input type="text" id="friendSearchInput" placeholder="Search by username or email" />
        <button id="friendSearchBtn">Search</button>
      </div>
      <!-- Display search results with an "Add Friend" button -->
      <ul id="friendSearchResults"></ul>
      <h4>Your Friends</h4>
      <!-- List to display current friends with remove options -->
      <ul id="friendList"></ul>
      <hr>
    </div>

    <!-- Manual Match -->
    <div id="manualMatchSection" class="container">
      <h3>Manually Add a Match (Test)</h3>
      <select id="matchType">
        <option value="1vs1">1vs1</option>
        <option value="vs AI">vs AI</option>
        <option value="Tournament">Tournament</option>
      </select>
      <select id="matchResult">
        <option value="‚úÖ Victoire">‚úÖ Victoire</option>
        <option value="‚ùå D√©faite">‚ùå D√©faite</option>
        <!-- <option value="‚úÖ Victory">‚úÖ Victory</option>
        <option value="‚ùå Defeat">‚ùå Defeat</option> -->
      </select>
      <button id="addMatchBtn">Add Match</button>
      <p id="matchResponse"></p>
    </div>

    <!-- Game History Section -->
    <div id="gameHistorySection" class="container">
      <h3>Game History</h3>
      <ul id="gameHistoryList" style="display: none;"></ul>
      <button id="loadGameHistoryBtn">Load Game History</button>
    </div>

    <!-- Stats Section -->
    <div id="statsSection" class="container">
      <h3>Stats</h3>
      <p>Total Games: <span id="totalGames"></span></p>
      <p>Wins: <span id="wins"></span></p>
      <p>Losses: <span id="losses"></span></p>
      <p>Win Rate: <span id="winRate"></span></p>
      <!-- Canvas element for Chart.js -->
      <canvas id="statsChart" width="50" height="50"></canvas>
    </div>

    <!-- Update Section -->
     <h3>Update</h3>

    <!-- Update Username -->
    <div class="form-group">
      <input type="text" id="newUsername" placeholder="New Username" />
      <button id="updateUsernameBtn">Update Username</button>
    </div>
    
    <!-- Update Email -->
    <div class="form-group">
      <input type="email" id="newEmail" placeholder="New Email" />
      <button id="updateEmailBtn">Update Email</button>
    </div>

    <!-- Update Status (to remove?) -->
    <div class="form-group">
      <select id="newStatus">
        <option value="online">Online</option>
        <option value="offline">Offline</option>
        <option value="in-game">In Game</option>
      </select>
      <button id="updateStatusBtn">Update Status</button>
    </div>

    <!-- Update Password Section -->
    <div class="form-group">
      <input type="password" id="oldPassword" placeholder="Current Password" />
      <input type="password" id="newPassword" placeholder="New Password" />
      <button id="updatePasswordBtn">Update Password</button>
    </div>
    <p id="passwordUpdateResponse"></p>
    <p id="updateResponse"></p>

    <button id="logoutBtn" style="display: none;">Logout</button>
    <button id="deleteAccountBtn" class="danger-btn" style="display: none;">Delete Account</button>
    <p id="logoutResponse"></p>
    <p id="deleteResponse"></p>
  </div>

  <!-- Main script (make sure this file imports the API client and sets up events) -->
  <script type="module" src="./src/main.ts"></script>
</body>

</html>