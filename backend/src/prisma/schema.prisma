generator client {
  provider = "prisma-client-js"
  output   = "../../node_modules/.prisma/client"
}

datasource db {
  provider = "sqlite"
  url      = "file:../../database/data.db"
}

model User {
  id               String                  @id @default(uuid())
  email            String                  @unique
  username         String                  @unique
  password         String
  avatar           String?
  createdAt        DateTime                @default(now())
  matchesAsPlayer2 Match[]                 @relation("Player2Match")
  matchesAsPlayer1 Match[]                 @relation("Player1Match")
  tournaments      TournamentParticipant[]
}

model Match {
  id        String   @id @default(uuid())
  player1Id String
  player2Id String
  winnerId  String?
  createdAt DateTime @default(now())
  player2   User     @relation("Player2Match", fields: [player2Id], references: [id])
  player1   User     @relation("Player1Match", fields: [player1Id], references: [id])
}

model Tournament {
  id           String                  @id @default(uuid())
  name         String
  createdAt    DateTime                @default(now())
  participants TournamentParticipant[]
}

model TournamentParticipant {
  id           String     @id @default(uuid())
  userId       String
  tournamentId String
  tournament   Tournament @relation(fields: [tournamentId], references: [id])
  user         User       @relation(fields: [userId], references: [id])
}
